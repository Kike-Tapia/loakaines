<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Gestión de Cursos</h1>
    <form id="cursoForm">
        <input type="text" name="txtNombreCurso" placeholder="Nombre del Curso" required>
        <input type="text" name="txtTelefono" placeholder="Teléfono" required>
        <button type="submit">Guardar Curso</button>
    </form>

    <h2>Lista de Cursos</h2>
    <ul id="cursosList"></ul>

    <script>
        $(document).ready(function () {
            // Cargar cursos al inicio
            cargarCursos();

            // Guardar curso
            $('#cursoForm').submit(function (e) {
                e.preventDefault();
                $.post('/cursos/guardar', $(this).serialize(), function (data) {
                    if (data.status === "success") {
                        alert("Curso guardado: " + data.nombre_curso);
                        cargarCursos();  // Actualiza la lista de cursos
                    } else {
                        alert("Error: " + data.message);
                    }
                });
            });
        });

        function cargarCursos() {
            $.get('/cursos/buscar', function (data) {
                $('#cursosList').empty();
                data.forEach(function (curso) {
                    $('#cursosList').append('<li>' + curso.Nombre_Curso + ' - ' + curso.Telefono + '</li>');
                });
            });
        }
    </script>
</body>
</html>
